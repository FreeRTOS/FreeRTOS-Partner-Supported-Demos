-------------------------------------------------------------------------------
-- File name: Startup.inc
-------------------------------------------------------------------------------
-- Environment:
--              IDE:            GHS Multi V7.1.4 or later
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
-- Definition of PE number
-------------------------------------------------------------------------------
  .set PE0        0
  .set PE1        1
  .set PE2        2
  .set PE3        3

-------------------------------------------------------------------------------
-- Jump to input address if the PE number is correct
-------------------------------------------------------------------------------
.macro jmpIfPEn addr, pe
    stsr  0,    r1, 2
    andi  0x7,  r1, r1
    cmp   pe,   r1
    bne   2f
 1: mov   addr, r1
    jmp   [r1]
 2:
    .endm
